features:
  ret_1:
    source: price
    lag_bars: 1
    allowed_horizons:
    - 1
    - 2
    - 3
    - 5
    - 12
    - 24
    - 60
    description: 1-bar lagged return
  ret_2:
    source: price
    lag_bars: 2
    allowed_horizons:
    - 2
    - 3
    - 5
    - 12
    - 24
    - 60
    description: 2-bar lagged return
  ret_5:
    source: price
    lag_bars: 5
    allowed_horizons:
    - 5
    - 12
    - 24
    - 60
    description: 5-bar lagged return
  ret_10:
    source: price
    lag_bars: 10
    allowed_horizons:
    - 10
    - 12
    - 24
    - 60
    description: 10-bar lagged return
  ret_15:
    source: price
    lag_bars: 15
    allowed_horizons:
    - 15
    - 24
    - 60
    description: 15-bar lagged return
  ret_30:
    source: price
    lag_bars: 30
    allowed_horizons:
    - 30
    - 60
    description: 30-bar lagged return
  ret_60:
    source: price
    lag_bars: 60
    allowed_horizons:
    - 60
    description: 60-bar lagged return
  rsi_10:
    source: derived
    lag_bars: 10
    allowed_horizons:
    - 1
    - 2
    - 3
    - 5
    - 12
    - 24
    - 60
    description: RSI with 10-bar lookback
  rsi_14:
    source: derived
    lag_bars: 14
    allowed_horizons: []
    description: RSI with 14-bar lookback
    rejected: true
  sma_20:
    source: derived
    lag_bars: 20
    allowed_horizons:
    - 1
    - 2
    - 3
    - 5
    - 12
    - 24
    - 60
    description: 20-bar simple moving average
  sma_50:
    source: derived
    lag_bars: 50
    allowed_horizons:
    - 1
    - 2
    - 3
    - 5
    - 12
    - 24
    - 60
    description: 50-bar simple moving average
  sma_200:
    source: derived
    lag_bars: 200
    allowed_horizons: []
    description: 200-bar simple moving average
    rejected: true
  ema_12:
    source: derived
    lag_bars: 12
    allowed_horizons:
    - 1
    - 2
    - 3
    - 5
    - 12
    - 24
    - 60
    description: 12-bar exponential moving average
  ema_26:
    source: derived
    lag_bars: 26
    allowed_horizons:
    - 1
    - 2
    - 3
    - 5
    - 12
    - 24
    - 60
    description: 26-bar exponential moving average
  volume:
    source: volume
    lag_bars: 1
    allowed_horizons:
    - 1
    - 2
    - 3
    - 5
    - 12
    - 24
    - 60
    description: Volume (1-bar lag)
  volume_sma_20:
    source: derived
    lag_bars: 20
    allowed_horizons: []
    description: 20-bar volume moving average
    rejected: true
  volatility_10:
    source: derived
    lag_bars: 10
    allowed_horizons:
    - 1
    - 2
    - 3
    - 5
    - 12
    - 24
    - 60
    description: 10-bar volatility
  volatility_20:
    source: derived
    lag_bars: 20
    allowed_horizons:
    - 1
    - 2
    - 3
    - 5
    - 12
    - 24
    - 60
    description: 20-bar volatility
  vwap:
    source: derived
    lag_bars: 1
    allowed_horizons:
    - 1
    - 2
    - 3
    - 5
    - 12
    - 24
    - 60
    description: Volume-weighted average price (1-bar lag)
  vwap_dev_high:
    source: derived
    lag_bars: 1
    allowed_horizons:
    - 1
    - 2
    - 3
    - 5
    - 12
    - 24
    - 60
    description: VWAP deviation high (1-bar lag)
  vwap_dev_low:
    source: derived
    lag_bars: 1
    allowed_horizons:
    - 1
    - 2
    - 3
    - 5
    - 12
    - 24
    - 60
    description: VWAP deviation low (1-bar lag)
  momentum_10:
    source: derived
    lag_bars: 10
    allowed_horizons:
    - 1
    - 2
    - 3
    - 5
    - 12
    - 24
    - 60
    description: 10-bar momentum
  momentum_20:
    source: derived
    lag_bars: 20
    allowed_horizons:
    - 1
    - 2
    - 3
    - 5
    - 12
    - 24
    - 60
    description: 20-bar momentum
  ret_future_1:
    source: price
    rejected: true
    reason: Future return (looks into future - structurally leaky)
    description: 'REJECTED: Future return (looks into future)'
  tth_5m:
    source: derived
    description: 'REJECTED: Time-to-hit requires future path'
    rejected: true
    reason: Time-to-hit requires future path
  barrier_5m_0.8:
    source: derived
    description: 'REJECTED: Barrier features encode barrier logic'
    rejected: true
    reason: Barrier features encode barrier logic
  p_up_60m_0.8:
    source: target_proxy
    description: 'REJECTED: Prediction/probability feature (leaky)'
    rejected: true
    reason: Prediction/probability feature (leaky)
  ts:
    source: metadata
    description: 'REJECTED: Timestamp column - metadata, not a feature'
    rejected: true
    reason: Metadata column, not a feature
  symbol:
    source: metadata
    description: 'REJECTED: Symbol column - metadata, not a feature'
    rejected: true
    reason: Metadata column, not a feature
  date:
    source: metadata
    description: 'REJECTED: Date column - metadata, not a feature'
    rejected: true
    reason: Metadata column, not a feature
  ret_zscore_5m:
    source: unknown
    description: 'AUTO-REJECTED: Detected as leaky feature'
    rejected: true
    reason: Auto-detected as leaky feature
    allowed_horizons: []
  flipcount_10m:
    source: unknown
    description: 'AUTO-REJECTED: Detected as leaky feature'
    rejected: true
    reason: Auto-detected as leaky feature
    allowed_horizons: []
  time_in_profit_10m:
    source: unknown
    description: 'AUTO-REJECTED: Detected as leaky feature'
    rejected: true
    reason: Auto-detected as leaky feature
    allowed_horizons: []
  time_in_profit_5m:
    source: unknown
    description: 'AUTO-REJECTED: Detected as leaky feature'
    rejected: true
    reason: Auto-detected as leaky feature
    allowed_horizons: []
  flipcount_5m:
    source: unknown
    description: 'AUTO-REJECTED: Detected as leaky feature'
    rejected: true
    reason: Auto-detected as leaky feature
    allowed_horizons: []
  ret_zscore_10m:
    source: unknown
    description: 'AUTO-REJECTED: Detected as leaky feature'
    rejected: true
    reason: Auto-detected as leaky feature
    allowed_horizons: []
  hour_of_day:
    source: unknown
    description: 'AUTO-REJECTED: Detected as leaky feature'
    rejected: true
    reason: Auto-detected as leaky feature
  time_in_profit_15m:
    source: unknown
    description: 'AUTO-REJECTED: Detected as leaky feature'
    rejected: true
    reason: Auto-detected as leaky feature
    allowed_horizons: []
  flipcount_15m:
    source: unknown
    description: 'AUTO-REJECTED: Detected as leaky feature'
    rejected: true
    reason: Auto-detected as leaky feature
    allowed_horizons: []
  vol_15m:
    source: unknown
    description: 'AUTO-REJECTED: Detected as leaky feature'
    rejected: true
    reason: Auto-detected as leaky feature
    allowed_horizons: []
  ret_zscore_30m:
    source: unknown
    description: 'AUTO-REJECTED: Detected as leaky feature'
    rejected: true
    reason: Auto-detected as leaky feature
    allowed_horizons: []
  ret_zscore_60m:
    lag_bars: 0
    source: unknown
    rejected: true
    description: 'AUTO-REJECTED: Detected as leaky feature'
    allowed_horizons: []
  ret_zscore_15m:
    lag_bars: 0
    source: unknown
    rejected: true
    description: 'AUTO-REJECTED: Detected as leaky feature'
    allowed_horizons: []
  time_in_profit_60m:
    lag_bars: 0
    source: unknown
    rejected: true
    description: 'AUTO-REJECTED: Detected as leaky feature'
    allowed_horizons: []
  vol_clustering_15m:
    lag_bars: 0
    source: unknown
    rejected: true
    description: 'AUTO-REJECTED: Detected as leaky feature'
  vol_over_vol_15m:
    lag_bars: 0
    source: unknown
    rejected: true
    description: 'AUTO-REJECTED: Detected as leaky feature'
    allowed_horizons: []
  flipcount_60m:
    lag_bars: 0
    source: unknown
    rejected: true
    description: 'AUTO-REJECTED: Detected as leaky feature'
    allowed_horizons: []
  vol_over_vol_60m:
    lag_bars: 0
    source: unknown
    rejected: true
    description: 'AUTO-REJECTED: Detected as leaky feature'
    allowed_horizons: []
  _hour:
    lag_bars: 0
    allowed_horizons: []
    source: unknown
    rejected: true
    description: 'AUTO-REJECTED: Detected as leaky feature'
  day_of_month:
    lag_bars: 0
    allowed_horizons: []
    source: unknown
    rejected: true
    description: 'AUTO-REJECTED: Detected as leaky feature'
  volume_sma_50:
    lag_bars: 0
    allowed_horizons: []
    source: unknown
    rejected: true
    description: 'AUTO-REJECTED: Detected as leaky feature'
  yz_vol_20:
    lag_bars: 0
    allowed_horizons: []
    source: unknown
    rejected: true
    description: 'AUTO-REJECTED: Detected as leaky feature'
  market_correlation_20d:
    lag_bars: 0
    allowed_horizons: []
    source: unknown
    rejected: true
    description: 'AUTO-REJECTED: Detected as leaky feature'
  negative_volume_index:
    lag_bars: 0
    allowed_horizons: []
    source: unknown
    rejected: true
    description: 'AUTO-REJECTED: Detected as leaky feature'
  volatility_60d:
    lag_bars: 0
    allowed_horizons: []
    source: unknown
    rejected: true
    description: 'AUTO-REJECTED: Detected as leaky feature'
  volume_ratio_20d:
    lag_bars: 0
    allowed_horizons: []
    source: unknown
    rejected: true
    description: 'AUTO-REJECTED: Detected as leaky feature'
  mass_index:
    lag_bars: 0
    allowed_horizons: []
    source: unknown
    rejected: true
    description: 'AUTO-REJECTED: Detected as leaky feature'
  rsi_21:
    lag_bars: 0
    allowed_horizons: []
    source: unknown
    rejected: true
    description: 'AUTO-REJECTED: Detected as leaky feature'
  _month:
    lag_bars: 0
    allowed_horizons: []
    source: unknown
    rejected: true
    description: 'AUTO-REJECTED: Detected as leaky feature'
  price_volume_trend:
    lag_bars: 0
    allowed_horizons: []
    source: unknown
    rejected: true
    description: 'AUTO-REJECTED: Detected as leaky feature'
  obv_ema:
    lag_bars: 0
    allowed_horizons: []
    source: unknown
    rejected: true
    description: 'AUTO-REJECTED: Detected as leaky feature'
  atr_x_vol:
    lag_bars: 0
    allowed_horizons: []
    source: unknown
    rejected: true
    description: 'AUTO-REJECTED: Detected as leaky feature'
  volume_volatility_20d:
    lag_bars: 0
    allowed_horizons: []
    source: unknown
    rejected: true
    description: 'AUTO-REJECTED: Detected as leaky feature'
  beta_60d:
    lag_bars: 0
    allowed_horizons: []
    source: unknown
    rejected: true
    description: 'AUTO-REJECTED: Detected as leaky feature'
  adx_14:
    lag_bars: 0
    allowed_horizons: []
    source: unknown
    rejected: true
    description: 'AUTO-REJECTED: Detected as leaky feature'
  gk_vol_5:
    lag_bars: 0
    allowed_horizons: []
    source: unknown
    rejected: true
    description: 'AUTO-REJECTED: Detected as leaky feature'
  parkinson_vol_5:
    lag_bars: 0
    allowed_horizons: []
    source: unknown
    rejected: true
    description: 'AUTO-REJECTED: Detected as leaky feature'
  _day:
    lag_bars: 0
    allowed_horizons: []
    source: unknown
    rejected: true
    description: 'AUTO-REJECTED: Detected as leaky feature'
  vol_60m:
    lag_bars: 0
    allowed_horizons: []
    source: unknown
    rejected: true
    description: 'AUTO-REJECTED: Detected as leaky feature'
  volume_std_20d:
    lag_bars: 0
    allowed_horizons: []
    source: unknown
    rejected: true
    description: 'AUTO-REJECTED: Detected as leaky feature'
  vol_persistence:
    lag_bars: 0
    allowed_horizons: []
    source: unknown
    rejected: true
    description: 'AUTO-REJECTED: Detected as leaky feature'
  market_correlation_60d:
    lag_bars: 0
    allowed_horizons: []
    source: unknown
    rejected: true
    description: 'AUTO-REJECTED: Detected as leaky feature'
  month_of_year:
    lag_bars: 0
    allowed_horizons: []
    source: unknown
    rejected: true
    description: 'AUTO-REJECTED: Detected as leaky feature'
  trading_day_of_month:
    lag_bars: 0
    allowed_horizons: []
    source: unknown
    rejected: true
    description: 'AUTO-REJECTED: Detected as leaky feature'
  vol_clustering_60m:
    lag_bars: 0
    allowed_horizons: []
    source: unknown
    rejected: true
    description: 'AUTO-REJECTED: Detected as leaky feature'
  ret_ord_5m:
    lag_bars: 0
    allowed_horizons: []
    source: unknown
    rejected: true
    description: 'AUTO-REJECTED: Detected as leaky feature'
  rsi_30:
    lag_bars: 0
    allowed_horizons: []
    source: unknown
    rejected: true
    description: 'AUTO-REJECTED: Detected as leaky feature'
  realized_vol_20:
    lag_bars: 0
    allowed_horizons: []
    source: unknown
    rejected: true
    description: 'AUTO-REJECTED: Detected as leaky feature'
  obv:
    lag_bars: 0
    allowed_horizons: []
    source: unknown
    rejected: true
    description: 'AUTO-REJECTED: Detected as leaky feature'
  rs_vol_20:
    lag_bars: 0
    allowed_horizons: []
    source: unknown
    rejected: true
    description: 'AUTO-REJECTED: Detected as leaky feature'
  price_impact:
    lag_bars: 0
    allowed_horizons: []
    source: unknown
    rejected: true
    description: 'AUTO-REJECTED: Detected as leaky feature'
  atr_14:
    lag_bars: 0
    allowed_horizons: []
    source: unknown
    rejected: true
    description: 'AUTO-REJECTED: Detected as leaky feature'
  cmf:
    lag_bars: 0
    allowed_horizons: []
    source: unknown
    rejected: true
    description: 'AUTO-REJECTED: Detected as leaky feature'
  mfi_14:
    lag_bars: 0
    allowed_horizons: []
    source: unknown
    rejected: true
    description: 'AUTO-REJECTED: Detected as leaky feature'
  macd_hist:
    lag_bars: 0
    allowed_horizons: []
    source: unknown
    rejected: true
    description: 'AUTO-REJECTED: Detected as leaky feature'
  ichimoku_chikou:
    lag_bars: 0
    allowed_horizons: []
    source: unknown
    rejected: true
    description: 'AUTO-REJECTED: Detected as leaky feature'
  mfi_21:
    lag_bars: 0
    allowed_horizons: []
    source: unknown
    rejected: true
    description: 'AUTO-REJECTED: Detected as leaky feature'
  _weekday:
    lag_bars: 0
    allowed_horizons: []
    source: unknown
    rejected: true
    description: 'AUTO-REJECTED: Detected as leaky feature'
  volume_quantile_20d:
    lag_bars: 0
    allowed_horizons: []
    source: unknown
    rejected: true
    description: 'AUTO-REJECTED: Detected as leaky feature'
  volume_ratio_5d:
    lag_bars: 0
    allowed_horizons: []
    source: unknown
    rejected: true
    description: 'AUTO-REJECTED: Detected as leaky feature'
  bb_width_20:
    lag_bars: 0
    allowed_horizons: []
    source: unknown
    rejected: true
    description: 'AUTO-REJECTED: Detected as leaky feature'
  vol_over_vol_5m:
    lag_bars: 0
    allowed_horizons: []
    source: unknown
    rejected: true
    description: 'AUTO-REJECTED: Detected as leaky feature'
  roc_50:
    lag_bars: 0
    allowed_horizons: []
    source: unknown
    rejected: true
    description: 'AUTO-REJECTED: Detected as leaky feature'
  stoch_d_21:
    lag_bars: 0
    allowed_horizons: []
    source: unknown
    rejected: true
    description: 'AUTO-REJECTED: Detected as leaky feature'
  volume_roc_10:
    lag_bars: 0
    allowed_horizons: []
    source: unknown
    rejected: true
    description: 'AUTO-REJECTED: Detected as leaky feature'
  day_of_week:
    lag_bars: 0
    allowed_horizons: []
    source: unknown
    rejected: true
    description: 'AUTO-REJECTED: Detected as leaky feature'
  vol_30m:
    lag_bars: 0
    allowed_horizons: []
    source: unknown
    rejected: true
    description: 'AUTO-REJECTED: Detected as leaky feature'
  macd_signal:
    lag_bars: 0
    allowed_horizons: []
    source: unknown
    rejected: true
    description: 'AUTO-REJECTED: Detected as leaky feature'
feature_families:
  lagged_returns:
    pattern: ^ret_\d+$
    default_lag_bars: null
    default_allowed_horizons:
    - 1
    - 2
    - 3
    - 5
    - 12
    - 24
    - 60
    description: Lagged returns (ret_N where N is lag)
  technical_indicators:
    pattern: ^(rsi|sma|ema|macd|bb|atr|adx)_\d+$
    default_lag_bars: null
    default_allowed_horizons:
    - 1
    - 2
    - 3
    - 5
    - 12
    - 24
    - 60
    description: Technical indicators with numeric lookback
  volume_features:
    pattern: ^(volume|vol_|obv|ad|cmf)
    default_lag_bars: 1
    default_allowed_horizons:
    - 1
    - 2
    - 3
    - 5
    - 12
    - 24
    - 60
    description: Volume-based features
  volatility_features:
    pattern: ^(volatility|vol_|std_|var_)
    default_lag_bars: null
    default_allowed_horizons:
    - 1
    - 2
    - 3
    - 5
    - 12
    - 24
    - 60
    description: Volatility features
  rejected_future_returns:
    pattern: ^(ret_future_|fwd_ret_)
    default_lag_bars: -1
    default_allowed_horizons: []
    rejected: true
    description: 'REJECTED: Future returns (leaky)'
  rejected_time_to_hit:
    pattern: ^tth_
    default_lag_bars: 0
    default_allowed_horizons: []
    rejected: true
    description: 'REJECTED: Time-to-hit features (leaky)'
  rejected_mfe_mdd:
    pattern: ^(mfe|mdd)_
    default_lag_bars: 0
    default_allowed_horizons: []
    rejected: true
    description: 'REJECTED: MFE/MDD features (leaky)'
  rejected_barriers:
    pattern: ^barrier_
    default_lag_bars: 0
    default_allowed_horizons: []
    rejected: true
    description: 'REJECTED: Barrier features (leaky)'
  rejected_targets:
    pattern: ^(y_|target_)
    default_lag_bars: 0
    default_allowed_horizons: []
    rejected: true
    description: 'REJECTED: Target columns (leaky)'
  rejected_predictions:
    pattern: ^p_
    default_lag_bars: 0
    default_allowed_horizons: []
    rejected: true
    description: 'REJECTED: Prediction/probability features (leaky)'
  rejected_metadata:
    pattern: ^(ts|timestamp|symbol|time)$
    default_lag_bars: 0
    default_allowed_horizons: []
    rejected: true
    description: 'REJECTED: Metadata columns'
validation:
  hard_rules:
  - lag_bars >= 0
  - allowed_horizons must be non-empty for usable features
  warnings:
  - lag_bars == 0 and source in ['price', 'derived']
  - source == 'unknown'
